# 实现阶段 (Implement Phase)

> 按照设计编写代码，遵循 TDD 和项目规范。

## 触发条件

- 设计阶段已完成（有设计文档）
- 或任务简单，无需设计（Bug 修复、小改动）

## 输入

- 设计文档（如有）
- 任务清单
- 相关上下文

## 执行步骤

### 1. 加载上下文

```
加载内容：
- context/tech/conventions/[相关规范]
- context/experience/INDEX.md（检索相关经验）
- 设计文档（如有）
```

### 2. 按任务清单实现

对于每个任务：

```
1. 理解任务要求
2. 编写测试（TDD）
3. 实现代码
4. 运行测试
5. 检查代码规范
6. 标记任务完成
```

### 3. TDD 流程

```
┌─────────┐
│  RED    │ ← 先写失败测试
└────┬────┘
     │
     ▼
┌─────────┐
│  GREEN  │ ← 最小实现通过
└────┬────┘
     │
     ▼
┌─────────┐
│REFACTOR │ ← 优化保持绿色
└────┬────┘
     │
     ▼
┌─────────┐
│  REPEAT │ ← 下一个测试
└─────────┘
```

### 4. 代码检查

每次提交前检查：

- [ ] 所有测试通过
- [ ] 无 lint 错误
- [ ] 无类型错误
- [ ] 符合项目规范

## 输出

- 代码变更
- 测试用例
- 【可选】更新经验索引（如有新发现）

## 下一阶段

实现完成后，进入 [审查阶段](review.md)。

## 验证标准

- [ ] 所有任务完成
- [ ] 测试覆盖充分
- [ ] 代码规范通过
- [ ] 无破坏性变更遗漏

## 常见问题

### 遇到阻塞怎么办？

```
1. 检查是否有相关经验：context/experience/INDEX.md
2. 检查是否有设计遗漏：回到设计阶段补充
3. 检查是否需求不清晰：回到提案阶段澄清
4. 记录问题，寻求帮助
```

### 发现设计问题怎么办？

```
1. 评估影响范围
2. 如果是小调整：直接修改，更新设计文档
3. 如果是大调整：暂停实现，回到设计阶段
```

### 发现新经验怎么办？

```
1. 在 context/experience/lessons/ 创建经验文档
2. 在 context/experience/INDEX.md 添加索引
3. 继续实现
```
