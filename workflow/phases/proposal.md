# 提案阶段 (Proposal Phase)

> 在开始实现之前，明确要做什么、为什么做、影响范围。

## 触发条件

当任务涉及以下内容时，需要先创建提案：

- ✅ 新功能或新能力
- ✅ 破坏性变更（API、数据库 schema、配置格式）
- ✅ 架构调整
- ✅ 性能优化（改变外部可观察行为）
- ✅ 安全模式变更

以下情况可跳过提案：

- ❌ Bug 修复（恢复预期行为）
- ❌ 代码重构（不改变外部行为）
- ❌ 文档更新
- ❌ 非破坏性依赖更新

## 输入

- 任务描述
- 相关上下文（业务背景、技术约束）

## 执行步骤

### 1. 检查现有提案

```
是否已有相关提案？
├─ 是 → 阅读提案，进入下一阶段
└─ 否 → 创建新提案
```

### 2. 创建提案文档

提案应包含：

```markdown
# 提案：[简短描述]

## 背景
为什么需要这个变更？

## 目标
这个变更要达成什么？

## 方案
打算怎么做？

## 影响
- 影响的模块：[列表]
- 破坏性变更：[是/否，如是则说明]
- 依赖变更：[是/否，如是则说明]

## 任务清单
- [ ] 任务 1
- [ ] 任务 2
- [ ] 任务 3
```

### 3. 审核提案

提案需要回答：

- [ ] 问题定义清晰吗？
- [ ] 方案可行吗？
- [ ] 影响范围评估准确吗？
- [ ] 任务拆分合理吗？

## 输出

- 提案文档（proposal.md 或等效文档）
- 任务清单（tasks.md 或等效文档）
- 【可选】设计文档（如需要）

## 下一阶段

| 条件 | 下一阶段 |
|------|---------|
| 需要技术设计 | [设计阶段](design.md) |
| 方案简单明确 | [实现阶段](implement.md) |

## 验证标准

- [ ] 提案文档完整
- [ ] 目标明确
- [ ] 影响范围清晰
- [ ] 任务可执行
